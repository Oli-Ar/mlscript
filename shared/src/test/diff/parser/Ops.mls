:AllowParseErrors
:AllowTypeErrors // TODO rm


acc + 1
//│ |acc| |+| |1|
//│ Parsed: {+ acc 1}

acc
+ 1
//│ |acc|↵|+| |1|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.10: 	+ 1
//│ ╙──      	^
//│ Parsed: {acc; 1}

acc
  + 1
//│ |acc|→|+| |1|
//│ Parsed: {+ acc 1}

acc +
  1
//│ |acc| |+|→|1|
//│ Parsed: {+ acc {1}}

acc
  +
  1
//│ |acc|→|+|↵|1|
//│ ╔══[ERROR] Unexpected newline in expression position
//│ ║  l.28: 	  +
//│ ║        	   ^
//│ ║  l.29: 	  1
//│ ╙──      	^^
//│ Parsed: {+ acc 1}

acc
  +
    1
//│ |acc|→|+|→|1|
//│ Parsed: {+ acc {1}}

acc
  + 1
  * 3
//│ |acc|→|+| |1|↵|*| |3|
//│ Parsed: {* (+ acc 1) 3}

acc
  + 1
  + 2
  * 3
//│ |acc|→|+| |1|↵|+| |2|↵|*| |3|
//│ Parsed: {* (+ (+ acc 1) 2) 3}

acc + 1 + 2 * 3
//│ |acc| |+| |1| |+| |2| |*| |3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc+1+2*3
//│ |acc|+|1|+|2|*|3|
//│ Parsed: {+ (+ acc 1) (* 2 3)}

acc +
  foo bar
  baz
//│ |acc| |+|→|foo| |bar|↵|baz|
//│ ╔══[WARNING] Paren-less applications should use the 'of' keyword
//│ ║  l.66: 	  foo bar
//│ ╙──      	  ^^^^^^^
//│ Parsed: {+ acc {foo (bar,); baz}}

a+
  b
  c
//│ |a|+|→|b|↵|c|
//│ Parsed: {+ a {b; c}}

a+
  b
c
//│ |a|+|→|b|←|↵|c|
//│ Parsed: {+ a {b}; c}

a
  +b
c
//│ |a|→|+|b|←|↵|c|
//│ Parsed: {+ a b; c}


a + b
  * 2
//│ |a| |+| |b|→|*| |2|
//│ Parsed: {* (+ a b) 2}

a(b)
  * 2
//│ |a|(|b|)|→|*| |2|
//│ Parsed: {* (a (b,)) 2}

a of b
  * 2
//│ |a| |#of| |b|→|*| |2|
//│ Parsed: {* (a (b,)) 2}

a then b
  * 2
//│ |a| |#then| |b|→|*| |2|
//│ ╔══[ERROR] Unexpected 'then'/'else' clause
//│ ║  l.108: 	a then b
//│ ║         	^^^^^^^^
//│ ║  l.109: 	  * 2
//│ ╙──       	^^^^^
//│ Parsed: {undefined}

a + b
  * 2
  + 1
  * 3
//│ |a| |+| |b|→|*| |2|↵|+| |1|↵|*| |3|
//│ Parsed: {* (+ (* (+ a b) 2) 1) 3}

a + b
  * 2
    + 1
//│ |a| |+| |b|→|*| |2|→|+| |1|
//│ Parsed: {* (+ a b) (+ 2 1)}

a + b
    * 2
  - 1
//│ |a| |+| |b|→|*| |2|←|→|-| |1|
//│ Parsed: {- (* (+ a b) 2) 1}

a + b
  * 2
    + 1
  * 3
//│ |a| |+| |b|→|*| |2|→|+| |1|←|↵|*| |3|
//│ Parsed: {* (* (+ a b) (+ 2 1)) 3}

a +
  b
    * 2
  + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|↵|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.147: 	  + 1
//│ ╙──       	  ^
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.148: 	  * 3
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; 1; 3}}

a +
    b
      * 2
    + 1
  * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|←|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.161: 	    + 1
//│ ╙──       	    ^
//│ Parsed: {* (+ a {* b 2; 1}) 3}

a +
  b
    * 2
  +
    1
      * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+|→|1|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.172: 	  +
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; {* 1 3}}}

a +
  b
    * 2
    +
      1
        * 3
//│ |a| |+|→|b|→|*| |2|↵|+|→|1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) {* 1 3}}}

a +
  b
    * 2
  + 1
    * 3
//│ |a| |+|→|b|→|*| |2|←|↵|+| |1|→|*| |3|
//│ ╔══[ERROR] Unexpected operator in expression position
//│ ║  l.193: 	  + 1
//│ ╙──       	  ^
//│ Parsed: {+ a {* b 2; * 1 3}}

a +
  b
    * 2
    + 1
      * 3
//│ |a| |+|→|b|→|*| |2|↵|+| |1|→|*| |3|
//│ Parsed: {+ a {+ (* b 2) (* 1 3)}}


